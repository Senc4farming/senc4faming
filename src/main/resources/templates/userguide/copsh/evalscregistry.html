<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:sd="http://www.w3.org/1999/xhtml"
      xmlns:sec="http://www.w3.org/1999/xhtml"
      layout:decorate="~{/layout/layout}">
<head>
    <meta charset="UTF-8">
    <title th:text="#{userguide.createevalscript.title}"></title>
</head>
<body>
<div layout:fragment="cabecera">
    <h1 th:text="#{userguide.createevalscript.title}"></h1>
    <h1 th:if="${ayudatitulo != 'Not found' }"  th:text="${ayudatitulo}"></h1>
</div>
<div layout:fragment="contenido">
    <form class="mx-1 mx-md-4"  role="form"  method="get">
        <div>
            <a th:href="@{/userguide/ctr/home}" >Go to user guide main page</a>
            <div class="field-item even">
                <p id="buttontoscreen">Create evalscript  access: <button type="submit" value="sentinelcredentialspage"
                                                                            class="btn btn-outline-success btn-sm"
                                                                            th:formaction="'/api/credentials'"
                                                                            th:method="get"
                                                                            th:text="#{userguide.createevalscript.ayudabody}" ></button>.
                </p>
                <p id="introduction">
                    This screen let users run custom script to download geotiff files from Copernicus Sentinel HUB.
                    An evalscript (or "custom script") is a piece of Javascript code which defines how the satellite data shall be processed by Sentinel Hub and what values the service shall return.
                    It does exist a public repository for <a href="https://github.com/sentinel-hub/custom-scripts?tab=readme-ov-file#sentinel-hub-custom-script-repository" > <strong>Sentinel Hub Custom Script</strong> </a>
                    where there are multiple examples created by researchers, that can be executed on WALGREEN.
                    <div class="container-sm py-5">
                        <img class="img-fluid" id="Picturep" th:src="@{/img/createevalscript.png}"/>
                    </div>
                    Once field title, description and custom script are introduced, the first thing to do is saving by pushing save button.
                    This action makes it possible to launch custom script later on using many different parameters as shown in picture bellow.
                    <div class="container-sm py-5">
                        <img class="img-fluid" id="Picturelaunch" th:src="@{/img/createevalscriptlauch.png}"/>
                    </div>
                    Parameters details are:
                    <ul>
                        <li>Title:Title</li>
                        <li>Description:Description</li>
                        <li>Collection: User can download from 2 missions , Sentinel 1 (s2l1c) or Sentinel 2 (s2l2a)</li>
                        <li>Initial Date:Initial date, format YYYY-MM-DD</li>
                        <li>End date:End date, format YYYY-MM-DD</li>
                        <li>Offset: Offet used to set the size on the area of interest.</li>
                        <li>Maxcloud coverage: Max cloud coverage for sentinel tiff images</li>
                        <li>Resolution: Define image resolution</li>
                        <li>Custom evalscript: Evalscript to run</li>
                        <li>Polygon: Coordinates format is  <strong>lat&#60;space&#62;long,lat&#60;space&#62;long,,,,,,,,,lat&#60;space&#62;long</strong></li>
                    </ul>
                    This parameters are need to call <a href="https://sentinelhub-py.readthedocs.io/en/latest/reference/sentinelhub.api.process.html" > <strong>sentinelhub.api.process</strong> </a> ,
                <dd>
                        <dt class="field-odd">and inform parameters<span class="colon">:</span></dt>
                        <dd class="field-odd"><ul class="simple">
                            <li><p><strong>evalscript</strong> (<em>str</em>) – <a class="reference external" href="https://docs.sentinel-hub.com/api/latest/#/Evalscript/">Evalscript</a>.</p></li>
                            <li><p><strong>input_data</strong> (<em>list</em><em>[</em><em>JsonDict</em><em> | </em><a class="reference internal" href="sentinelhub.api.base_request.html#sentinelhub.api.base_request.InputDataDict" title="sentinelhub.api.base_request.InputDataDict"><em>InputDataDict</em></a><em>]</em>) – A list of input dictionary objects as described in the API reference. It can be generated
                                with the helper method <cite>SentinelHubRequest.input_data</cite></p></li>
                            <li><p><strong>responses</strong> (<em>list</em><em>[</em><em>JsonDict</em><em>]</em>) – A list of <cite>output.responses</cite> objects as described in the API reference. It can be generated
                                with the helper function <cite>SentinelHubRequest.output_response</cite></p></li>
                            <li><p><strong>bbox</strong> (<a class="reference internal" href="sentinelhub.geometry.html#sentinelhub.geometry.BBox" title="sentinelhub.geometry.BBox"><em>BBox</em></a><em> | </em><em>None</em>) – Bounding box describing the area of interest.</p></li>
                            <li><p><strong>geometry</strong> (<a class="reference internal" href="sentinelhub.geometry.html#sentinelhub.geometry.Geometry" title="sentinelhub.geometry.Geometry"><em>Geometry</em></a><em> | </em><em>None</em>) – Geometry describing the area of interest.</p></li>
                            <li><p><strong>size</strong> (<em>tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>] </em><em>| </em><em>None</em>) – Size of the image.</p></li>
                            <li><p><strong>resolution</strong> (<em>tuple</em><em>[</em><em>float</em><em>, </em><em>float</em><em>] </em><em>| </em><em>None</em>) – Resolution of the image. It has to be in units compatible with the given CRS.</p></li>
                            <li><p><strong>data_folder</strong> – location of the directory where the fetched data will be saved.</p></li>
                            <li><p><strong>config</strong> – A custom instance of config class to override parameters from the saved configuration.</p></li>
                            <li><p><strong>kwargs</strong> (<em>Any</em>) – </p></li>
                        </ul>
                        </dd>
                    </dl>

                </dd>
                    In case query does not find results next screen will be shown:
                    <div class="container-sm py-5">
                        <img class="img-fluid" id="Picturenodata" th:src="@{/img/createevalscriptnodata.png}"/>
                    </div>
                    In case query find results it will be shown a message asking user to push "Show till file" button to view geotiff.
                </p>
            </div>
        </div>
    </form>
</div>
</body>
</html>